import{r as f,g as _,a as q,u as z,j as o,s as L,b as E,T as m,d as R,e as O,m as G,f as J,h as K,B as Q,t as j,i as X,k as Z,l as tt,n as k,I as W,o as et,p as ot,S as $,A as nt,q as rt}from"./App-CtNfpXfy.js";import{u as st,F as at,O as it,I as lt,M as dt,a as ut}from"./main-layout-C9wGZ63z.js";function ct(t){return f.Children.toArray(t).filter(e=>f.isValidElement(e))}function pt(t){return q("MuiInputAdornment",t)}const F=_("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var U;const gt=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${R(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},ft=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:l,position:a,size:p,variant:v}=t,d={root:["root",n&&"disablePointerEvents",a&&`position${R(a)}`,v,l&&"hiddenLabel",p&&`size${R(p)}`]};return O(d,pt,e)},vt=L("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:gt})(G(({theme:t})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${F.positionStart}&:not(.${F.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),D=f.forwardRef(function(e,n){const l=z({props:e,name:"MuiInputAdornment"}),{children:a,className:p,component:v="div",disablePointerEvents:d=!1,disableTypography:h=!1,position:x,variant:r,...u}=l,i=st()||{};let c=r;r&&i.variant,i&&!c&&(c=i.variant);const y={...l,hiddenLabel:i.hiddenLabel,size:i.size,disablePointerEvents:d,position:x,variant:c},C=ft(y);return o.jsx(at.Provider,{value:null,children:o.jsx(vt,{as:v,ownerState:y,className:E(C.root,p),ref:n,...u,children:typeof a=="string"&&!h?o.jsx(m,{color:"textSecondary",children:a}):o.jsxs(f.Fragment,{children:[x==="start"?U||(U=o.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,a]})})})}),H=f.createContext({}),Y=f.createContext(void 0);function xt(t,e){return e===void 0||t===void 0?!1:Array.isArray(e)?e.includes(t):t===e}const ht=t=>{const{classes:e,fullWidth:n,selected:l,disabled:a,size:p,color:v}=t,d={root:["root",l&&"selected",a&&"disabled",n&&"fullWidth",`size${R(p)}`,v]};return O(d,K,e)},bt=L(Q,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${R(n.size)}`]]}})(G(({theme:t})=>({...t.typography.button,borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active,[`&.${j.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${j.selected}`]:{color:(t.vars||t).palette.text.primary,backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.text.primary,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.selectedOpacity)}}}}},...Object.entries(t.palette).filter(X()).map(([e])=>({props:{color:e},style:{[`&.${j.selected}`]:{color:(t.vars||t).palette[e].main,backgroundColor:t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[e].main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:t.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:t.typography.pxToRem(15)}}]}))),V=f.forwardRef(function(e,n){const{value:l,...a}=f.useContext(H),p=f.useContext(Y),v=J({...a,selected:xt(e.value,l)},e),d=z({props:v,name:"MuiToggleButton"}),{children:h,className:x,color:r="standard",disabled:u=!1,disableFocusRipple:i=!1,fullWidth:c=!1,onChange:y,onClick:C,selected:B,size:I="medium",value:T,...P}=d,w={...d,color:r,disabled:u,disableFocusRipple:i,fullWidth:c,size:I},M=ht(w),A=g=>{C&&(C(g,T),g.defaultPrevented)||y&&y(g,T)},b=p||"";return o.jsx(bt,{className:E(a.className,M.root,x,b),disabled:u,focusRipple:!i,ref:n,onClick:A,onChange:y,value:T,ownerState:w,"aria-pressed":B,...P,children:h})});function mt(t){return q("MuiToggleButtonGroup",t)}const s=_("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),yt=t=>{const{classes:e,orientation:n,fullWidth:l,disabled:a}=t,p={root:["root",n,l&&"fullWidth"],grouped:["grouped",`grouped${R(n)}`,a&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return O(p,mt,e)},Bt=L("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${s.grouped}`]:e.grouped},{[`& .${s.grouped}`]:e[`grouped${R(n.orientation)}`]},{[`& .${s.firstButton}`]:e.firstButton},{[`& .${s.lastButton}`]:e.lastButton},{[`& .${s.middleButton}`]:e.middleButton},e.root,n.orientation==="vertical"&&e.vertical,n.fullWidth&&e.fullWidth]}})(G(({theme:t})=>({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${s.grouped}`]:{[`&.${s.selected} + .${s.grouped}.${s.selected}`]:{borderTop:0,marginTop:0}},[`& .${s.firstButton},& .${s.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${s.lastButton},& .${s.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${s.lastButton}.${j.disabled},& .${s.middleButton}.${j.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${s.grouped}`]:{[`&.${s.selected} + .${s.grouped}.${s.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${s.firstButton},& .${s.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${s.lastButton},& .${s.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${s.lastButton}.${j.disabled},& .${s.middleButton}.${j.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),Ct=f.forwardRef(function(e,n){const l=z({props:e,name:"MuiToggleButtonGroup"}),{children:a,className:p,color:v="standard",disabled:d=!1,exclusive:h=!1,fullWidth:x=!1,onChange:r,orientation:u="horizontal",size:i="medium",value:c,...y}=l,C={...l,disabled:d,fullWidth:x,orientation:u,size:i},B=yt(C),I=f.useCallback((b,g)=>{if(!r)return;const S=c&&c.indexOf(g);let N;c&&S>=0?(N=c.slice(),N.splice(S,1)):N=c?c.concat(g):[g],r(b,N)},[r,c]),T=f.useCallback((b,g)=>{r&&r(b,c===g?null:g)},[r,c]),P=f.useMemo(()=>({className:B.grouped,onChange:h?T:I,value:c,size:i,fullWidth:x,color:v,disabled:d}),[B.grouped,h,T,I,c,i,x,v,d]),w=ct(a),M=w.length,A=b=>{const g=b===0,S=b===M-1;return g&&S?"":g?B.firstButton:S?B.lastButton:B.middleButton};return o.jsx(Bt,{role:"group",className:E(B.root,p),ref:n,ownerState:C,...y,children:o.jsx(H.Provider,{value:P,children:w.map((b,g)=>o.jsx(Y.Provider,{value:A(g),children:b},g))})})});/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["path",{d:"M5 12l14 0",key:"svg-0"}]],jt=Z("outline","minus","Minus",$t),Rt=({inputRef:t,slotProps:e,onChange:n,...l})=>{const a=f.useRef(null),p=tt(a,t),v=k(r=>{r.target.value=`${Math.max(1,parseInt(r.target.value)||1)}`,n?.(r)}),d=k(r=>{if(n){const u={target:{value:r.toString()},currentTarget:{value:r.toString()},type:"change",bubbles:!0,cancelable:!0,preventDefault:()=>{},stopPropagation:()=>{}};n(u)}}),h=k(()=>{const{current:r}=a;if(!r)return;const u=Number(r.value),i=Math.max(1,u-1);r.value=i.toString(),d(i)}),x=k(()=>{const{current:r}=a;if(!r)return;const u=Number(r.value),i=Math.max(1,u+1);r.value=i.toString(),d(i)});return o.jsx(it,{...l,type:"number",sx:{"& input":{textAlign:"center",width:"2.5rem"}},inputRef:p,onChange:v,startAdornment:o.jsx(D,{position:"start",children:o.jsx(W,{onClick:h,children:o.jsx(jt,{})})}),endAdornment:o.jsx(D,{position:"end",children:o.jsx(W,{onClick:x,children:o.jsx(lt,{})})}),slotProps:{input:{step:1,sx:{textAlign:"center",...e?.input?.sx},min:1,...e?.input},...e}})};function St(){const[{networkType:t,initNodesNumber:e,modelInfo:n,clusterInfo:{status:l}},{setNetworkType:a,setInitNodesNumber:p,init:v}]=et(),d=ot(),[h,x]=f.useState(!1),r=k(async()=>{if(l==="idle"||l==="failed"){x(!0),Promise.resolve().then(()=>v()).then(()=>d("/join")).catch(u=>console.error(u)).finally(()=>x(!1));return}else d("/join")});return o.jsxs(dt,{children:[o.jsx(m,{variant:"h1",children:"Build Your Own AI Cluster"}),o.jsxs($,{gap:2.5,children:[o.jsxs($,{gap:.5,children:[o.jsx(m,{variant:"body1",children:"Step 1 - Specify the initial number of nodes"}),o.jsxs(m,{variant:"body2",color:"text.secondary",fontWeight:"regular",children:["Parallax runs and hosts model distributedly on your everyday hardware. Select the number of nodes you would like to add to your cluster with their connection types."," "]})]}),o.jsxs($,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:2,children:[o.jsx(m,{color:"text.secondary",children:"Node Number"}),o.jsx(Rt,{sx:{width:"10rem",boxShadow:"none",bgcolor:"transparent"},slotProps:{root:{sx:{bgcolor:"transparent","&:hover":{bgcolor:"transparent"},"&:focus-within":{bgcolor:"transparent"}}},input:{sx:{bgcolor:"transparent !important","&:focus":{outline:"none"}}}},value:e,onChange:u=>p(Number(u.target.value))})]}),o.jsxs($,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:2,children:[o.jsx(m,{color:"text.secondary",children:"Are you nodes within the same local network?"}),o.jsxs(Ct,{sx:{width:"10rem",textTransform:"none"},exclusive:!0,value:t,onChange:(u,i)=>i&&a(i),children:[o.jsx(V,{value:"local",sx:{textTransform:"none"},children:"Local"}),o.jsx(V,{value:"remote",sx:{textTransform:"none"},children:"Remote"})]})]})]}),o.jsxs($,{gap:2.5,children:[o.jsxs($,{gap:.5,children:[o.jsx(m,{variant:"body1",children:"Step 2 - Select the model you would like to host"}),o.jsx(m,{variant:"body2",color:"text.secondary",fontWeight:"regular",children:"Currently we support a handful of state-of-the-art open source models. Do keep in mind that larger models require more nodes to host, so If this is your first time trying Parallax, we suggest you to start with smaller models."})]}),o.jsx(ut,{}),!!n&&n.vram>0&&o.jsx(nt,{severity:"warning",variant:"standard",children:o.jsx(m,{variant:"inherit",children:["You’ll need a ",o.jsx("strong",{children:`minimum of ${n.vram} GB of total VRAM`})," to host this model."]})},"vram-warning")]}),o.jsx($,{direction:"row",justifyContent:"flex-end",alignItems:"center",gap:2,children:o.jsx(rt,{loading:h,onClick:r,children:"Continue"})})]})}export{St as default};
